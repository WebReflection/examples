:host {
  --padding: 4px;
  --icon-size: 12px;
  --visibility: visible;
  --hover-color: rgb(from currentColor r g b / .7);
  --border-color: rgb(from currentColor r g b / .2);
  /*! (c) Geist UI Icons - https://www.npmjs.com/package/@geist-ui/icons */
  --svg-opened: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M8 12h8" /></svg>');
  --svg-closed: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M12 8v8" /><path d="M8 12h8" /></svg>');
  --svg-folder: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M2.707 7.454V5.62C2.707 4.725 3.469 4 4.409 4h4.843c.451 0 .884.17 1.204.474l.49.467c.126.12.296.186.473.186h8.399c.94 0 1.55.695 1.55 1.59v.737m-18.661 0h-.354a.344.344 0 00-.353.35l.508 11.587c.015.34.31.609.668.609h17.283c.358 0 .652-.269.667-.61L22 7.805a.344.344 0 00-.353-.35h-.278m-18.662 0h18.662"></path></svg>');
  --svg-file: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z"></path><path d="M13 2v7h7"></path></svg>');
  --svg-text: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"></path><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"></path></svg>');
  display: block;
  interpolate-size: allow-keywords;
}

:host, :host *, :host *::before, :host *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  margin-inline: 0;
  /* avoid huge areas highlighted in Android */
  -webkit-tap-highlight-color: transparent;
}

:host button {
  cursor: pointer;
  user-select: none;
  appearance: none;
  border: none;
  background-color: transparent;
  color: inherit;
  font-family: inherit;
  font-size: inherit;
  font-weight: 300;
  line-height: inherit;
  text-align: inherit;
  text-decoration: inherit;
  text-transform: inherit;
  outline: none;
  padding: var(--padding);
  border-radius: var(--padding);
  transition: color .2s;
  &:hover {
    color: var(--hover-color);
  }
  &:focus {
    color: var(--hover-color);
    outline: 1px dotted var(--border-color);
    outline-offset: -1px;
  }
}

:host ul {
  list-style: none;
}

:host > ul {
  padding-inline-start: calc(var(--icon-size) + var(--padding));
  & ul {
    padding-inline-start: calc(var(--icon-size) * 2);
  }
}

:host li {
  cursor: pointer;
  white-space: nowrap;
  &::before {
    content: '';
    display: inline-block;
    width: calc(var(--icon-size) * 1.5);
    height: calc(var(--icon-size) * 1.5);
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-inline-start: calc(var(--icon-size) * -.75);
    margin-inline-end: calc(var(--icon-size) * .5 - var(--padding));
    transform: translateY(calc(var(--icon-size) * .25));
  }
  &::before {
    transition: all .2s ease;
  }
  &.waiting::before {
    opacity: .5;
    transform: scale(.9) translateY(calc(var(--icon-size) * .3));
  }
  &.waiting.folder > button::before {
    opacity: 0;
  }
  &.file::before {
    background-image: var(--svg-file);
  }
  &.text::before {
    background-image: var(--svg-text);
  }
  & > button::after {
    content: attr(data-bytes);
    color: var(--hover-color);
    font-size: x-small;
    display: inline-block;
    margin-inline-start: var(--padding);
  }
  &.folder::before {
    background-image: var(--svg-folder);
  }
  &.folder > button {
    font-weight: 400;
    &::after {
      content: attr(data-items);
    }
  }
  &.folder > button::before {
    transition: opacity .2s ease;
    content: '';
    display: inline-block;
    width: var(--icon-size);
    height: var(--icon-size);
    background-image: var(--svg-closed);
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-inline-start: calc(var(--icon-size) * -1.75);
    margin-inline-end: calc(var(--icon-size) * .75);
    transform: translateY(calc(var(--icon-size) * .1));
  }
  &.folder.opened > button::before {
    background-image: var(--svg-opened);
  }
  &.folder > ul {
    border-inline-start: 1px dotted transparent;
    transition: height .2s ease, visibility .2s;
    overflow: clip;
    overflow-x: auto;
  }
  &.folder:not(.opened) > ul {
    visibility: hidden;
    height: 0;
    & ul {
      visibility: hidden;
    }
  }
  &.folder.opened > ul {
    border-inline-start: 1px dotted var(--border-color);
    visibility: visible;
    height: auto;
  }
}
